<ng-container *ngIf="$auth.estaLogueado()">
    <!-- begin #header -->

    <!-- end #header -->
    <header id="page-topbar">
        <div class="navbar-header">
            <div class="d-flex">
                <!-- LOGO -->
                <div class="navbar-brand-box">
                    <a href="" class="logo logo-dark">
                        <span class="logo-sm">
                            <img src="assets/images/icono_sarp_p.png" alt="" height="40">
        
                            <!-- <img src="https://firebasestorage.googleapis.com/v0/b/sigban-autentication.appspot.com/o/Archivos%2FlogoSimplificado.png?alt=media&token=36861849-3c79-45f3-b147-30676e8f741f" alt="" height="40" style="
                            margin-left: -10px;"> -->
                        </span>
                        <span class="logo-lg" >
                            <img src="assets/images/logo_b_claro.png" alt="logo" height="60">
        
        
                        </span>
                    </a>
        
                    <a href="" class="logo logo-light">
                        <span class="logo-sm">
                            <img src="assets/images/icono_sarp_p.png" alt="" height="40">
        
                        </span>
                        <span class="logo-lg">
                            <img src="assets/images/Logo_b_oscuro.png" alt="logo" height="60">
                        </span>
                    </a>
                </div>

                <button type="button" class="btn btn-sm px-3 font-size-16 header-item vertical-menu-btn">
                        <i class="fa fa-fw fa-bars"></i>
                </button>


                <!-- <div class="dropdown d-none d-lg-block ms-2">
                    <button type="button" class="btn header-item" data-bs-toggle="dropdown" aria-haspopup="false" aria-expanded="false">
                            <span>Components</span>
                            <i class="mdi mdi-chevron-down"></i> 
                        </button>
                    <div class="dropdown-menu dropdown-menu-xl p-2">
                        <div class="row">
                            <div class="col-md-6">
                                <a class="dropdown-item" href="#!">Alerts</a>
                                <a class="dropdown-item" href="#!">Buttons</a>
                                <a class="dropdown-item" href="#!">Cards</a>
                                <a class="dropdown-item" href="#!">Dropdowns</a>
                                <a class="dropdown-item" href="#!">Lightbox</a>
                                <a class="dropdown-item" href="#!">Modals</a>
                                <a class="dropdown-item" href="#!">Range Slider</a>
                            </div>
                            <div class="col-md-6">
                                <a class="dropdown-item" href="#!">Progress Bars</a>
                                <a class="dropdown-item" href="#!">Sweet-Alert</a>
                                <a class="dropdown-item" href="#!">Tabs & Accordions</a>
                                <a class="dropdown-item" href="#!">Typography</a>
                                <a class="dropdown-item" href="#!">General</a>
                                <a class="dropdown-item" href="#!">Rating</a>
                                <a class="dropdown-item" href="#!">Notifications</a>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="dropdown dropdown-mega d-none d-lg-block">
                    <button type="button" class="btn header-item" data-bs-toggle="dropdown" aria-haspopup="false" aria-expanded="false">
                            <span>Categories</span>
                            <i class="mdi mdi-chevron-down"></i> 
                        </button>
                    <div class="dropdown-menu p-2 dropdown-megamenu">
                        <div class="row">
                            <div class="col">
                                <h5 class="font-size-14 mx-4 mt-2">Computers & Accessories</h5>
                                <a class="dropdown-item" href="#!">Laptops &amp; Tablets</a>
                                <a class="dropdown-item" href="#!">Desktop Computers</a>
                                <a class="dropdown-item" href="#!">Networking Products (NAS)</a>
                                <a class="dropdown-item" href="#!">Monitors</a>
                                <a class="dropdown-item" href="#!">Bags, Cases &amp; Sleeves</a>
                                <a class="dropdown-item" href="#!">Batteries</a>
                                <a class="dropdown-item" href="#!">Charges &amp; Adapters</a>
                            </div>
                            <div class="col">
                                <h5 class="font-size-14 ms-4 mt-2">Smartphones & Tablets</h5>
                                <a class="dropdown-item" href="#!">Apple iPhone</a>
                                <a class="dropdown-item" href="#!">Android Smartphones</a>
                                <a class="dropdown-item" href="#!">Phablets</a>
                                <a class="dropdown-item" href="#!">Apple iPad</a>
                                <a class="dropdown-item" href="#!">Android Tablets</a>
                                <a class="dropdown-item" href="#!">Tablets with Keyboard</a>
                            </div>
                            <div class="col">
                                <h5 class="font-size-14 ms-4 mt-2">Television & Video</h5>
                                <a class="dropdown-item" href="#!">TV Sets</a>
                                <a class="dropdown-item" href="#!">Home Theater Systems</a>
                                <a class="dropdown-item" href="#!">DVD Players & Recorders</a>
                                <a class="dropdown-item" href="#!">DVD-VCR Combos</a>
                                <a class="dropdown-item" href="#!">Projectors</a>
                                <a class="dropdown-item" href="#!">Projection Screens</a>
                                <a class="dropdown-item" href="#!">Satelite Television</a>
                            </div>
                            <div class="col">
                                <h5 class="font-size-14 ms-4 mt-2">Cameras, Photo & Video</h5>
                                <a class="dropdown-item" href="#!">Point & Shoot Digital Cameras</a>
                                <a class="dropdown-item" href="#!">DSLR Cameras</a>
                                <a class="dropdown-item" href="#!">Mirrorless Cameras</a>
                                <a class="dropdown-item" href="#!">Body Mounted Cameras</a>
                                <a class="dropdown-item" href="#!">Camera Lenses</a>
                                <a class="dropdown-item" href="#!">Video Studio</a>
                            </div>
                            <div class="col">
                                <div class="py-lg-2 pr-lg-2">
                                    <img src="assets/images/illustrator/1.png" alt="" class="img-fluid mx-auto" style="max-height: 250px;">
                                </div>
                            </div>
                        </div>
                    </div>
                </div> -->
            </div>


            <div class="d-flex">
                <div class="dropdown d-inline-block">
                    <div class="dropdown d-inline-block">
                        <button type="button" class="btn header-item noti-icon right-bar-toggle" (click)="setOnTheme()">
                            <div class="icon-sm">
                                <i [class]="icono" ></i>
                            </div> 
                            
                        </button>

                    </div>
                    <!-- <button type="button" class="btn header-item" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                            <i class="icon-sm" data-feather="search"></i>
                        </button>
                    <div class="dropdown-menu dropdown-menu-lg dropdown-menu-end p-0">
                        <form class="p-2">
                            <div class="search-box">
                                <div class="position-relative">
                                    <input id="search" type="text" class="form-control rounded bg-light border-0" placeholder="Search...">
                                    <i class="mdi mdi-magnify search-icon"></i>
                                </div>
                            </div>
                        </form>
                    </div> -->
                </div>



                <div class="dropdown d-none d-lg-inline-block">
                    <button type="button" class="btn header-item noti-icon" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                            <i class="icon-sm" data-feather="grid"></i>
                        </button>
                    <div class="dropdown-menu dropdown-menu-lg dropdown-menu-end p-0">
                        <div class="p-3 border-bottom">
                            <div class="row align-items-center">
                                <div class="col">
                                    <h5 class="m-0 font-size-15"> Empresas </h5>
                                </div>
                                <div class="col-auto">
                                    <!-- <a href="#!" class="small fw-semibold text-decoration-underline">Añadir Empresa <i class="fas fa-plus"></i></a> -->
                                </div>
                            </div>
                        </div>
                        <div data-simplebar style="max-height: 270px;">

                            <ng-container *ngFor="let item of empresas">
                                <a class="notification-item text-reset" href="#!">
                                    <div class="d-flex border-bottom align-items-center">
                                        <div class="flex-shrink-0">
                                            <img src="{{item.logo}}" alt="logo" width="50">
                                        </div>
                                        <div class="flex-grow-1 ms-4">
                                            <h6 class="mb-0">{{item.razon_social}} <span class="badge badge-soft-info">✔️</span></h6>
                                            <p class="font-size-12 text-muted mb-0">{{item.slogan}}.</p>

                                        </div>
                                    </div>
                                </a>

                            </ng-container>

                            <!-- end dropdown item -->


                        </div>
                        <div class="p-2 border-top d-grid">
                            <a class="btn btn-sm btn-link font-size-14 btn-block text-center" href="javascript:void(0)">
                                <i class="uil-arrow-circle-right me-1"></i> <span>Añadir empresa..</span>
                            </a>
                        </div>
                        <!-- end simplebar -->
                    </div>
                </div>

                <div class="dropdown d-inline-block">
                    <button type="button" class="btn   header-item noti-icon" id="page-header-notifications-dropdown" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false" [class.vibrating]="haynotificaciones">
                            <i class="icon-sm" data-feather="bell"></i>
                            <span *ngIf="haynotificaciones" class="noti-dot bg-success"></span>
                        </button>
                    <div class="dropdown-menu dropdown-menu-lg dropdown-menu-end p-0" aria-labelledby="page-header-notifications-dropdown">
                        <div class="p-3">
                            <div class="row align-items-center">
                                <div class="col">
                                    <h5 class="m-0 font-size-15"> Notificaciones <span *ngIf="count_noti > 0" class="badge bg-info ms-1">{{count_noti}}</span> </h5>
                                </div>
                                <div class="col-12">
                                  
                                        <form class="p-2">
                                            <div class="search-box">
                                                <div class="position-relative">
                                                    <input type="text" class="form-control rounded bg-light border-0" placeholder="buscar...">
                                                    <i class="mdi mdi-magnify search-icon"></i>
                                                </div>
                                            </div>
                                        </form>
                                  
                                </div>
                            </div>
                        </div>

                        
                        <div data-simplebar="init" style="max-height: 250px;" >
                           
                            <!-- <h6 class="dropdown bg-light" style="margin-booton">
                               
                            </h6> -->
                            <div (click)="revisarNoti(item)"  *ngFor="let item of notificaciones"  class="text-reset notification-item barra-animada">
                                <div class="d-flex border-bottom align-items-start">
                                    <div class="flex-shrink-0">
                                        <img [src]="item.usuario.avatar" class="me-3 rounded-circle avatar-sm avatar-noti" alt="user-pic">
                                    </div>
                                    <div class="flex-grow-1">
                                        <h6 class="mb-1 fw-bold" [class.text-primary]="verificarVistaUsuario(item)">{{item.usuario.nombre}} <span *ngIf="verificarVistaUsuario(item)" class="mb-1 text-end"><i class="bx bxs-bell text-primary" [class.vibrating]="verificarVistaUsuario(item)"></i></span></h6>
                                       
                                        <div class="text-muted">
                                            <p class="mb-1 font-size-13" [innerHTML]="item.mensaje"></p>
                                            <p class="mb-0  text-primary font-size-10 text-uppercase fw-bold"><i class="mdi mdi-clock-outline"></i>  {{item.fecha | fechaRelativa}}</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                           
                        </div>
                        <div class="p-2 border-top d-grid">
                            <a class="btn btn-sm btn-link font-size-14 btn-block text-center" href="javascript:void(0)">
                                <i class="uil-arrow-circle-right me-1"></i> <span>Ver todas..</span>
                            </a>
                        </div>
                    </div>
                </div>


                <div class="dropdown d-inline-block">

                    <button type="button" class="btn header-item user text-start d-flex align-items-center" id="page-header-user-dropdown" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                            <img class="rounded-circle header-profile-user" src="{{this.$auth.currentUser.getAvatar()}}"
                            alt="Header Avatar">
                            <span class="ms-2 d-none d-sm-block user-item-desc">
                                <span class="user-name">{{this.$auth.currentUser.getNombreCorto()}}</span>
                                <span class="user-sub-title">{{this.$auth.currentUser.getEmail()}}</span>
                            </span>
                        </button>
                    <div class="dropdown-menu dropdown-menu-end pt-0">
                        <div class="p-3 bg-primary border-bottom">
                            <h6 class="mb-0 text-white">{{this.$auth.currentUser.getNombreCorto()}}</h6>
                            <p class="mb-0 font-size-11 text-white-50 fw-semibold">{{this.$auth.currentUser.getEmail()}}</p>
                        </div>
                        <a class="dropdown-item" href="javascript:;" [routerLink]="['/profile']" routerLinkActive="router-link-active"  ><i class="mdi mdi-account-circle text-muted font-size-16 align-middle me-1"></i> <span class="align-middle">Perfil</span></a>
                        <!-- <a class="dropdown-item" href="apps-chat.html"><i class="mdi mdi-message-text-outline text-muted font-size-16 align-middle me-1"></i> <span class="align-middle">Messages</span></a> -->
                        <!-- <a class="dropdown-item" href="apps-kanban-board.html"><i class="mdi mdi-calendar-check-outline text-muted font-size-16 align-middle me-1"></i> <span class="align-middle">Taskboard</span></a> -->
                        <!-- <a class="dropdown-item" href="pages-faqs.html"><i class="mdi mdi-lifebuoy text-muted font-size-16 align-middle me-1"></i> <span class="align-middle">Help</span></a> -->
                        <div class="dropdown-divider"></div>
                        <a *ngIf="this.$auth.currentUser.is_vendedor" class="dropdown-item" href="javascript:;"><i class="mdi mdi-wallet text-muted font-size-16 align-middle me-1"></i> <span class="align-middle">Balance : <b>{{this.$auth.balance | currency}}</b></span></a>
                        <!-- <a class="dropdown-item d-flex align-items-center" href="user-settings.html"><i class="mdi mdi-cog-outline text-muted font-size-16 align-middle me-1"></i> <span class="align-middle">Settings</span><span class="badge badge-soft-success ms-auto">New</span></a> -->
                        <!-- <a class="dropdown-item" href="auth-lockscreen-basic.html"><i class="mdi mdi-lock text-muted font-size-16 align-middle me-1"></i> <span class="align-middle">Lock screen</span></a> -->
                        <a class="dropdown-item" (click)="salir()" href="javascript:;"><i class="mdi mdi-logout text-muted font-size-16 align-middle me-1"></i> <span class="align-middle">Salir</span></a>
                    </div>
                </div>
            </div>
        </div>
        
        <div *ngIf="$auth.isLoading | async" class="loader-container">
            <mat-progress-bar mode="indeterminate" ></mat-progress-bar>
        </div>
    </header>

</ng-container>